---
import Journal from '../../../layouts/Journal.astro';
import { getEntries } from '../../../utils/craftApi';
import { JOURNAL_CATEGORIES_QUERY, linksEntriesByCategoryQuery } from '../../../utils/queries';

export async function getStaticPaths() {
  const entries = await getEntries(JOURNAL_CATEGORIES_QUERY);
  return entries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry }, // Pass the full entry data as props
  }));
}

const { entry } = Astro.props;

const posts = await getEntries(linksEntriesByCategoryQuery(entry.id));

---

<Journal title={'Links: ' + entry.title} description={"Links tagged with '" + entry.title + "'"} posts={posts} />
